{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport VariantSelector from \"./VariantSelector\";\n\nclass Product extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.handleOptionChange = this.handleOptionChange.bind(this);\n    this.handleQuantityChange = this.handleQuantityChange.bind(this);\n    this.findImage = this.findImage.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.product.options.forEach(selector => {\n      this.setState({\n        selectedOptions: {\n          [selector.name]: selector.values[0].value\n        }\n      });\n    });\n  }\n\n  findImage(images, variantId) {\n    const primary = images[0];\n    const image = images.filter(function (image) {\n      return image.variant_ids.includes(variantId);\n    })[0];\n    return (image || primary).src;\n  }\n\n  handleOptionChange(event) {\n    const target = event.target;\n    let selectedOptions = this.state.selectedOptions;\n    selectedOptions[target.name] = target.value;\n    const selectedVariant = this.props.product.variants.find(variant => {\n      return variant.selectedOptions.every(selectedOption => {\n        return selectedOptions[selectedOption.name] === selectedOption.value.valueOf();\n      });\n    });\n    this.setState({\n      selectedVariant: selectedVariant,\n      selectedVariantImage: selectedVariant.attrs.image.src\n    });\n  }\n\n  handleQuantityChange(event) {\n    this.setState({\n      selectedVariantQuantity: event.target.value\n    });\n  }\n\n  render() {\n    let variantImage = this.state.selectedVariantImage || this.props.product.images[0].src;\n    let variant = this.state.selectedVariant || this.props.product.variants[0];\n    let variantQuantity = this.state.selectedVariantQuantity || 1;\n    let variantSelectors = this.props.product.options.map(option => {\n      return __jsx(VariantSelector, {\n        handleOptionChange: this.handleOptionChange,\n        key: option.id.toString(),\n        option: option\n      });\n    });\n    return __jsx(\"div\", {\n      className: \"Product\"\n    }, this.props.product.images.length ? __jsx(\"img\", {\n      src: variantImage,\n      alt: `${this.props.product.title} product shot`\n    }) : null, __jsx(\"h5\", {\n      className: \"Product__title\"\n    }, this.props.product.title), __jsx(\"span\", {\n      className: \"Product__price\"\n    }, \"$\", variant.price), variantSelectors, __jsx(\"label\", {\n      className: \"Product__option\"\n    }, \"Quantity\", __jsx(\"input\", {\n      min: \"1\",\n      type: \"number\",\n      defaultValue: variantQuantity,\n      onChange: this.handleQuantityChange\n    })), __jsx(\"button\", {\n      className: \"Product__buy button\",\n      onClick: () => this.props.addVariantToCart(variant.id, variantQuantity)\n    }, \"Add to Cart\"));\n  }\n\n}\n\nexport default Product;","map":null,"metadata":{},"sourceType":"module"}