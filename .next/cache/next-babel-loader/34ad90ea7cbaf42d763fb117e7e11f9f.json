{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport VariantSelector from \"./VariantSelector\";\n\nvar Product =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Product, _Component);\n\n  function Product(props) {\n    var _this;\n\n    _classCallCheck(this, Product);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Product).call(this, props));\n    _this.state = {};\n    _this.handleOptionChange = _this.handleOptionChange.bind(_assertThisInitialized(_this));\n    _this.handleQuantityChange = _this.handleQuantityChange.bind(_assertThisInitialized(_this));\n    _this.findImage = _this.findImage.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Product, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      this.props.product.options.forEach(function (selector) {\n        _this2.setState({\n          selectedOptions: _defineProperty({}, selector.name, selector.values[0].value)\n        });\n      });\n    }\n  }, {\n    key: \"findImage\",\n    value: function findImage(images, variantId) {\n      var primary = images[0];\n      var image = images.filter(function (image) {\n        return image.variant_ids.includes(variantId);\n      })[0];\n      return (image || primary).src;\n    }\n  }, {\n    key: \"handleOptionChange\",\n    value: function handleOptionChange(event) {\n      var target = event.target;\n      var selectedOptions = this.state.selectedOptions;\n      selectedOptions[target.name] = target.value;\n      var selectedVariant = this.props.product.variants.find(function (variant) {\n        return variant.selectedOptions.every(function (selectedOption) {\n          return selectedOptions[selectedOption.name] === selectedOption.value.valueOf();\n        });\n      });\n      this.setState({\n        selectedVariant: selectedVariant,\n        selectedVariantImage: selectedVariant.attrs.image.src\n      });\n    }\n  }, {\n    key: \"handleQuantityChange\",\n    value: function handleQuantityChange(event) {\n      this.setState({\n        selectedVariantQuantity: event.target.value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var variantImage = this.state.selectedVariantImage || this.props.product.images[0].src;\n      var variant = this.state.selectedVariant || this.props.product.variants[0];\n      var variantQuantity = this.state.selectedVariantQuantity || 1;\n      var variantSelectors = this.props.product.options.map(function (option) {\n        return __jsx(VariantSelector, {\n          handleOptionChange: _this3.handleOptionChange,\n          key: option.id.toString(),\n          option: option\n        });\n      });\n      return __jsx(\"div\", {\n        className: \"Product\"\n      }, this.props.product.images.length ? __jsx(\"img\", {\n        src: variantImage,\n        alt: \"\".concat(this.props.product.title, \" product shot\")\n      }) : null, __jsx(\"h5\", {\n        className: \"Product__title\"\n      }, this.props.product.title), __jsx(\"span\", {\n        className: \"Product__price\"\n      }, \"$\", variant.price), variantSelectors, __jsx(\"label\", {\n        className: \"Product__option\"\n      }, \"Quantity\", __jsx(\"input\", {\n        min: \"1\",\n        type: \"number\",\n        defaultValue: variantQuantity,\n        onChange: this.handleQuantityChange\n      })), __jsx(\"button\", {\n        className: \"Product__buy button\",\n        onClick: function onClick() {\n          return _this3.props.addVariantToCart(variant.id, variantQuantity);\n        }\n      }, \"Add to Cart\"));\n    }\n  }]);\n\n  return Product;\n}(Component);\n\nexport default Product;","map":null,"metadata":{},"sourceType":"module"}